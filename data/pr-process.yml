name: PR-Process

on: 
  schedule:
    - cron:  '1 */3 * * *'
  pull_request_review:
  check_suite:
    types: [rerequested, completed]
  pull_request:
    types: [labeled]


jobs:

  private_action:
  
    runs-on: ubuntu-latest
    
    name: PR-Process

    steps:
    - name: Dump GitHub context
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: |
        echo "$GITHUB_CONTEXT"
            
    - name: Checkout Master Repo
      uses: actions/checkout@v2
      with:
        path: master
        
    - name: Checkout Private Action
      uses: actions/checkout@v2
      with:
        path: pr-action
        repository: {ORG_NAME}/pr_action 
        # `GitHub_PAT` is a secret that contains your PAT to clone that private repo
        token: ${{ secrets.PAT_GITHUB }} 
        
    - name: Run the private action
      uses: ./pr-action/
      with:
        org-pat-token: ${{ secrets.PAT_GITHUB }}
        action-pat-token: ${{ secrets.GITHUB_TOKEN }}
        repo_config: true
